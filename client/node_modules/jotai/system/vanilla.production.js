System.register([],function(W){"use strict";return{execute:function(){W("atom",L);let K=0;function L(t,s){const f=`atom${++K}`,m={toString(){return f}};return typeof t=="function"?m.read=t:(m.init=t,m.read=N,m.write=R),s&&(m.write=s),m}function N(t){return t(this)}function R(t,s,f){return s(this,typeof f=="function"?f(t(this)):f)}const q=(t,s)=>t.unstable_is?t.unstable_is(s):s===t,B=t=>"init"in t,F=t=>!!t.write,M=Symbol(""),_="pending",T="fulfilled",U="rejected",$=t=>typeof t=="object"&&t!==null&&M in t,D=new WeakMap,x=(t,s,f)=>{if(!D.has(t)){let m;const w=new Promise((j,V)=>{let y=t;const z=h=>p=>{y===h&&(w.status=T,w.value=p,j(p),f())},g=h=>p=>{y===h&&(w.status=U,w.reason=p,V(p),f())};t.then(z(t),g(t)),m=(h,p)=>{h&&(D.set(h,w),y=h,h.then(z(h),g(h)),s(),s=p)}});w.status=_,w[M]=m,D.set(t,w)}return D.get(t)},Q=t=>typeof(t==null?void 0:t.then)=="function",G=t=>"v"in t||"e"in t,O=t=>{if("e"in t)throw t.e;return t.v},P=t=>{const s=t.v;return $(s)&&s.status===_?s:null},H=(t,s,f)=>{f.p.has(t)||(f.p.add(t),s.then(()=>{f.p.delete(t)},()=>{f.p.delete(t)}))},E=()=>[new Map,new Map,new Set],I=(t,s,f)=>{t[0].has(s)||t[0].set(s,new Set),t[1].set(s,f)},X=(t,s,f)=>{const m=t[0].get(s);m&&m.add(f)},Y=(t,s)=>t[0].get(s),J=(t,s)=>{t[2].add(s)},b=t=>{for(;t[1].size||t[2].size;){t[0].clear();const s=new Set(t[1].values());t[1].clear();const f=new Set(t[2]);t[2].clear(),s.forEach(m=>{var w;return(w=m.m)==null?void 0:w.l.forEach(j=>j())}),f.forEach(m=>m())}},Z=W("createStore",()=>{const t=new WeakMap,s=r=>{let e=t.get(r);return e||(e={d:new Map,p:new Set,n:0},t.set(r,e)),e},f=(r,e,n,o=()=>{},c=()=>{})=>{const l="v"in e,u=e.v,v=P(e);if(Q(n))if(v)v!==n&&(v[M](n,o),++e.n);else{const a=x(n,o,c);if(a.status===_)for(const i of e.d.keys()){const d=s(i);H(r,a,d)}e.v=a,delete e.e}else v&&v[M](Promise.resolve(n),o),e.v=n,delete e.e;(!l||!Object.is(u,e.v))&&++e.n},m=(r,e,n,o)=>{var c;const l=s(e);l.d.set(n,o.n);const u=P(l);u&&H(e,u,o),(c=o.m)==null||c.t.add(e),r&&X(r,n,e)},w=(r,e,n)=>{const o=s(e);if(!(n!=null&&n(e))&&G(o)&&(o.m||Array.from(o.d).every(([i,d])=>w(r,i,n).n===d)))return o;o.d.clear();let c=!0;const l=i=>{if(q(e,i)){const S=s(i);if(!G(S))if(B(i))f(i,S,i.init);else throw new Error("no atom init");return O(S)}const d=w(r,i,n);if(c)m(r,e,i,d);else{const S=E();m(S,e,i,d),g(S,e,o),b(S)}return O(d)};let u,v;const a={get signal(){return u||(u=new AbortController),u.signal},get setSelf(){return!v&&F(e)&&(v=(...i)=>{if(!c)return z(e,...i)}),v}};try{const i=e.read(l,a);return f(e,o,i,()=>u==null?void 0:u.abort(),()=>{if(o.m){const d=E();g(d,e,o),b(d)}}),o}catch(i){return delete o.v,o.e=i,++o.n,o}finally{c=!1}},j=r=>O(w(void 0,r)),V=(r,e)=>{const n=a=>{var i,d;const S=s(a),k=new Set((i=S.m)==null?void 0:i.t);for(const A of S.p)k.add(A);return(d=Y(r,a))==null||d.forEach(A=>{k.add(A)}),k},o=[],c=new Set,l=a=>{if(!c.has(a)){c.add(a);for(const i of n(a))a!==i&&l(i);o.push(a)}};l(e);const u=new Set([e]),v=a=>c.has(a);for(let a=o.length-1;a>=0;--a){const i=o[a],d=s(i),S=d.n;let k=!1;for(const A of d.d.keys())if(A!==i&&u.has(A)){k=!0;break}k&&(w(r,i,v),g(r,i,d),S!==d.n&&(I(r,i,d),u.add(i))),c.delete(i)}},y=(r,e,...n)=>{const o=l=>O(w(r,l)),c=(l,...u)=>{let v;if(q(e,l)){if(!B(l))throw new Error("atom not writable");const a=s(l),i="v"in a,d=a.v,S=u[0];f(l,a,S),g(r,l,a),(!i||!Object.is(d,a.v))&&(I(r,l,a),V(r,l))}else v=y(r,l,...u);return b(r),v};return e.write(o,c,...n)},z=(r,...e)=>{const n=E(),o=y(n,r,...e);return b(n),o},g=(r,e,n)=>{if(n.m&&!P(n)){for(const o of n.d.keys())n.m.d.has(o)||(h(r,o).t.add(e),n.m.d.add(o));for(const o of n.m.d||[])if(!n.d.has(o)){n.m.d.delete(o);const c=p(r,o);c==null||c.t.delete(e)}}},h=(r,e)=>{const n=s(e);if(!n.m){w(r,e);for(const o of n.d.keys())h(r,o).t.add(e);if(n.m={l:new Set,d:new Set(n.d.keys()),t:new Set},F(e)&&e.onMount){const o=n.m,{onMount:c}=e;J(r,()=>{const l=c((...u)=>y(r,e,...u));l&&(o.u=l)})}}return n.m},p=(r,e)=>{const n=s(e);if(n.m&&!n.m.l.size&&!Array.from(n.m.t).some(o=>{var c;return(c=s(o).m)==null?void 0:c.d.has(e)})){const o=n.m.u;o&&J(r,o),delete n.m;for(const l of n.d.keys()){const u=p(r,l);u==null||u.t.delete(e)}const c=P(n);c&&c[M](void 0,()=>{});return}return n.m};return{get:j,set:z,sub:(r,e)=>{const n=E(),o=h(n,r);b(n);const c=o.l;return c.add(e),()=>{c.delete(e);const l=E();p(l,r),b(l)}}}});let C;const tt=W("getDefaultStore",()=>(C||(C=Z()),C))}}});
